<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Nicolas PrivateChef{% endblock %}</title>
				<link rel="preconnect" href="https://fonts.googleapis.com">
				<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
				<link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
				<link href="https://fonts.googleapis.com/css2?family=Noticia+Text:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
				<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noticia+Text:ital,wght@0,400;0,700;1,400;1,700&display=swap"rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/img/favicon/favicon.ico">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon-16x16.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon.png">
        <link rel="manifest" href="/img/favicon/site.webmanifest">
        {% block stylesheets %}
        {% endblock %}
{% block javascripts %}
	{% block importmap %}
		{{ importmap('app') }}
	{% endblock %}
{% endblock %}
</head>
<body>
<header>
  <nav id="mainNav" class="flex flex-between align-center pt10">
    <a href="{{ path('home') }}">
      <img src="/img/LogoNicolasChefPrive_Cloche_Blanc.svg" alt="Logo de Nicolas Chef" class="logo-nav ml25"/>
    </a>

    <button id="navToggle" class="hamburger-button mr25">
      <span class="line"></span>
      <span class="line"></span>
      <span class="line"></span>
    </button>

    <div id="fullScreenMenu" class="overlay">
      <ul class="overlay-content">
        <li>
          <a href="{{ path('home') }}">Accueil</a>
        </li>
        <li>
          <a href="{{ path('home') }}#aboutme">À propos</a>
        </li>
        <li>
          <a href="{{ path('home') }}#prestations_card">Prestations</a>
        </li>
        <li>
          <a href="{{ path('contact') }}">Contactez-moi</a>
        </li>
      </ul>
      <div class="overlay-brand">Nicolas PrivateChef</div>
    </div>

    <ul class="desktop-menu flex flex-end flex-gap-40 mr50">
      <li>
        <a href="{{ path('home') }}">Accueil</a>
      </li>
      <li>
        <a href="{{ path('home') }}#aboutme">À propos</a>
      </li>
      <li>
        <a href="{{ path('home') }}#prestations_card">Prestations</a>
      </li>
      <li>
        <a href="{{ path('contact') }}">Contactez-moi</a>
      </li>
    </ul>
  </nav>
</header>

<main>
{% block body %}
{% endblock %}
</main>
<footer class="site-footer">
  <div class="footer-content">
    <p>&copy; {{ "now"|date("Y") }} Nicolas Chef. Tous droits réservés.</p>
    {# <div class="footer-links">
      <a href="{{ path('home') }}">Accueil</a>
      <a href="{{ path('home') }}#prestations">Prestations</a>
      <a href="{{ path('contact') }}">Contactez-moi</a>
    </div>
    <div class="social-links">
      <a href="#" aria-label="Instagram">Instagram</a>
    </div> #}
  </div>
</footer>

{# Include modale #}
{% include 'modals/mentions_legales.html.twig' %}
{% include 'modals/confidentialite.html.twig' %}

</body>
</html>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const mainNav = document.getElementById('mainNav');
    const scrollThreshold = 50; 

    if (!mainNav) {
        console.error("L'élément de navigation (mainNav) est introuvable.");
        return;
    }

    function handleScrollColorChange() {
        const scrollPosition = window.scrollY || window.pageYOffset;

        if (scrollPosition > scrollThreshold) {
            mainNav.classList.add('nav-dark');
        } else {
            mainNav.classList.remove('nav-dark');
        }
    }

    window.addEventListener('scroll', handleScrollColorChange);
    
    handleScrollColorChange();
});
// Ouverture modale
function openModal(element)
{
  event.preventDefault();
  const modalId = element.dataset.modalid;
	console.log(modalId)

  const modal = document.getElementById(modalId);
  if (!modal) return;
  modal.style.display = 'flex';

  modal.setAttribute('tabindex', '-1');
  modal.focus();

  const closeBtn = modal.querySelector('.modal-close');
  closeBtn.addEventListener('click', () => closeModal(modal));

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal(modal);
    }
  });

  document.addEventListener('keydown', function onKeyDown(e) {
    if (e.key === "Escape") {
      closeModal(modal);
      document.removeEventListener('keydown', onKeyDown);
    }
  });
}

// Fermeture modale
function closeModal(modal)
{
  modal.style.display = 'none';
}

/**
 * Fonction pour basculer la visibilité d'une section dépliable.
 * Ferme également toutes les autres sections ouvertes.
 * @param {Event} event - L'événement de clic.
 * @param {string} contentId - L'ID de la section de contenu à basculer.
 */
function toggleCollapsible(event, contentId) {
    event.preventDefault();

    const content = document.getElementById(contentId);
    const menuItem = event.currentTarget;

    const allCollapsibleContents = document.querySelectorAll('.collapsible-content');
    const allMenuItems = document.querySelectorAll('.menu-item');

    const isCurrentlyOpen = content.classList.contains('show');

    allCollapsibleContents.forEach(otherContent => {
        if (otherContent.id !== contentId && otherContent.classList.contains('show')) {
            otherContent.classList.remove('show');
            otherContent.style.maxHeight = '0';

            const otherMenuItem = Array.from(allMenuItems).find(item => {
                const wrapper = item.closest('.menu-item-wrapper');
                return wrapper && wrapper.querySelector('.collapsible-content') === otherContent;
            });
            if (otherMenuItem) {
                otherMenuItem.classList.remove('active');
            }
        }
    });
    if (!isCurrentlyOpen) {
        content.classList.add('show');
        menuItem.classList.add('active');
    } else {
        content.classList.remove('show');
        menuItem.classList.remove('active');
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const navToggle = document.getElementById('navToggle');
    const fullScreenMenu = document.getElementById('fullScreenMenu');
    
    function toggleMenu() {

        fullScreenMenu.classList.toggle('open'); 
        navToggle.classList.toggle('open'); 
        document.body.classList.toggle('menu-open');
    }
    navToggle.addEventListener('click', toggleMenu);

    const menuLinks = fullScreenMenu.querySelectorAll('a');
    menuLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (fullScreenMenu.classList.contains('open')) {
                toggleMenu();
            }
        });
    });
});


</script>
